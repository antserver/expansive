<!DOCTYPE html>
<html lang="en">
<head>
    <title>Configuring Expansive</title>
    <!-- Copyright Embedthis Software. All Rights Reserved. -->
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
    <meta name="description" content="Configuring Expansive" />
    <link href='https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,700|Open+Sans:300italic,400,300,700'
        rel='stylesheet' type='text/css'>
    <link href='https://fonts.googleapis.com/css?family=Julius+Sans+One' rel='stylesheet' type='text/css'>
    <link href="../images/favicon.ico" rel="shortcut icon" />
    <link href="../semantic-ui/semantic.css" rel="stylesheet" type="text/css" />
    <link href="../css/all.css" rel="stylesheet" type="text/css" />
    

</head>
<body>
         <div class="sidebar">
        <div class="ui large left vertical inverted labeled menu">
            <div class="item">
                <a href="../index.html" class="logo">Expansive<br/>Docs</a>
            </div>
            <div class="item">
                <div class="menu">
                    <a class="header item" href="../index.html">Home</a>
                    <a class="item" href="../users/features.html">Expansive Features</a>
                    <a class="item" href="https://embedthis.com/expansive/download.html">Download</a>
                    <a class="item" href="../licensing/index.html">Licensing</a>
                </div>
            </div>
            <div class="item">
                <div class="menu">
                    <a class="header item" href="../start/index.html">Getting Started</a>
                    <a class="item" href="../start/quick.html">Quick Start</a>
                    <a class="item" href="../start/installing.html">Installing Expansive</a>
                    <a class="item" href="../start/releaseNotes.html">Release Notes</a>
                    <a class="item" href="../start/source.html">Building from Source</a>
                </div>
            </div>


            <div class="item">
                <a href="../users/index.html"><b>User's Guide</b></a>
                <div class="menu">
                    <a class="item" href="../users/tour.html">Quick Tour</a>
                    <a class="item" href="../users/commands.html">Commands</a>
                    <a class="item" href="../users/files.html">Files and Directories</a>
                    <a class="item" href="../users/skeletons.html">Skeletons</a>
                    <a class="item" href="../users/meta.html">Meta Data</a>
                    <a class="item" href="../users/partials.html">Partials</a>
                    <a class="item" href="../users/layouts.html">Layouts</a>
                    <a class="item" href="../users/assets.html">Assets and Raw Files</a>

                    <a class="item" href="../users/stylescripts.html">Scripts and Stylesheets</a>
                    <a class="item" href="../users/collections.html">Collections</a>
                    <a class="item" href="../users/scripting.html">Scripting</a>

                    <a class="item" href="../users/rendering.html">Rendering</a>

                    <!-- MOB - name? -->
                    <a class="item" href="../users/serving.html">Serving Content</a>

                    <!-- MOB - name? -->
                    <a class="item" href="../users/packages.html">Packages and Plugins</a>
                    <a class="item" href="../users/configuration.html">Configuration</a>

                    <!-- query engine -->
                    <a class="item" href="../users/sitemaps.html">Sitemaps</a>
                    <a class="item" href="../users/troubleshoot.html">Troubleshooting</a>
                </div>
            </div>
            <div class="item">
                <a href="../developers/index.html">Developer's Guide</a>
                <div class="menu">
                    <a class="item" href="../developers/plugins.html">Creating Plugins</a>
                    <a class="item" href="../developers/skeletons.html">Creating Skeletons</a>
                    <a class="item" href="../man/expansive.txt">Manual Page</a>
                </div>
            </div>
            <div class="item">
                <a href="../developers/project.html">Project Resources</a>
                <div class="menu">
                    <!-- MOB -->
                    <a class="item" href="http://goo.gl/ynBrjA">Official Expansive News</a>
                    <a class="item" href="https://embedthis.com/expansive/">Expansive Web Site</a>
                    <a class="item" href="https://github.com/embedthis/exp">Source Code Repository</a>
                    <a class="item" href="https://github.com/embedthis/exp/issues">Project Issue Database</a>
                    <a class="item" href="https://github.com/embedthis/exp/releases">Change Log</a>
                    <a class="item" href="https://github.com/embedthis/exp/milestones">Roadmap</a>
                    <a class="item" href="https://embedthis.com/developers/contributors.html">Contributors Agreement</a>
                </div>
            </div>
            <div class="item">
                <b>Links</b>
                <div class="menu">
                    <a class="item" href="https://embedthis.com/">Embedthis Web Site</a>
                    <a class="item" href="https://embedthis.com/blog/">Embedthis Blog</a>
                    <a class="item" href="http://twitter.com/mobstream">Twitter</a>
                </div>
            </div>
        </div>
    </div>

    


    <div class="ui inverted masthead">
         
        <div class="ui fixed inverted menu">
            <div class="ui sidebar-launch button">
                <i class="icon list layout"></i>
            </div>
            <div class="right menu">
                  
                    <a class="item" href="https://embedthis.com/">Embedthis</a>
                    <a class="item" href="https://embedthis.com/expansive/">Expansive Site</a>
                    <span class="desktop-only">
                        <a class="item" href="http://goo.gl/dGRDl4">Expansive News</a>
                        <a class="item" href="https://github.com/embedthis/expansive">Repository</a>
                        <a class="item" href="https://embedthis.com/blog/">Blog</a>
                        <a class="item" href="https://twitter.com/mobstream">Twitter</a>
                    </span>

            </div>
        </div>
        
        <div class="ui breadcrumb">
            <a class="section" href="../">Home</a>
            
            <div class="divider">/</div>
            <a class="section" href="index.html">
                User's Guide
            </a>
            
            
            <div class="divider">/</div>
            <a class="active section" href="configuration.html">Configuring Expansive</a>
            
        </div>
        
        <div class="version desktop-only">
            v0.5.0
        </div>

    </div>
    <div class="content">


        <h1>Configuring Expansive</h1>
        <p>Expansive is configured by an <em>expansive.json</em> file that defines the top level configuration
        for the site and controls how Expansive renders the site. It specifies initial meta data, directory names, 
        file patterns to process, ports to serve and processing instructions. Expansive uses sensible defaults 
        so you typically do not need to configure much. An expansive.json file must be present for Expansive 
        to operate.</p>

        <p>Here is a typical expansive.json file:</p>

        <code class="inverted">{
    meta: {
        url: 'https://embedthis.com/',
    },
    control: {
        copy: [ 'images' ],
        listen: '127.0.0.1:4000'
    },
    "release": {
        "services": {
            "minify-css": {
                "minify": true
            },
            "render-js": {
                "usemap": false
            }
        }
    }
}</code>

        <p>The <em>meta</em> property section defines the default public URL for the site and also provides
        data properties that may be used in content pages. The <em>copy</em> property provides a 
        hint to Expansive that anything under the 'images' directory should be copied and not processed 
        by the Expansive pipeline. The <em>services</em> property set provides configuration for the 
        plugin services to control their operation and enable/disable minification.</p> 

        <h2>Creating expansive.json</h2>
        <p>To create an expansive.json file, use <em>expansive init</em>.</p>
        <code class="inverted">$ expansive init</code>

        <p>Alternatively, install a ready-made Expansive skeleton package that includes an 
        <em>expansive.json</em> file such as 
        <a href="https://github.com/embedthis/exp-html-skeleton">exp-html-skeleton</a>.</p>
        <code class="inverted">$ pak install exp-html-skeleton</code>

        <h2>Control Properties</h2>
        <p>These are the standard properties in the <em>control</em> collection in <em>expansive.json</em>.</p>
        <table class="ui celled table">
            <thead>
                <tr><th>Name</th><th>Description</th></tr>
            </thead>
            <tbody>
                <tr><td>copy</td><td>Array of patterns to copy without processing. The patterns may include 
                    <em>*</em> or <em>**</em>. If a directory is specifed, all files under the directories copied. 
                    The files are relative to the <em>contents</em> directory.</td></tr>
                <tr><td>documents</td><td>Array of patterns to process. The patterns may include 
                    <em>*</em> or <em>**</em>. If a directory is specifed, all files under the directories 
                    are copied. The files are relative to the top-level directory.</td></tr>
                <tr><td>files</td><td>Array of directories containing raw content to copy to <em>dist</em> 
                    without processing. By default, contains <em>files</em>.</td></tr>
                <tr><td>listen</td><td>Address on which to listen for HTTP requests. May be just a port number.</td></tr>
                <tr><td>script</td><td>Script to evaluate to inject code into the Javascript global execution
                    context. This is visible to scripting in all pages.</td></tr>
                <tr><td>transforms</td><td>Hash of extension mappings to a list of transform services for those 
                    mappings. Mappings are in the form <em>ext -> ext</em>. For example:
                    <code>transforms: {
    'less -> css': [ 'compile-less', 'prefix-css', 'minify-css', 'compress' ]
}</code>

                    Some of the standard service names are: <em>compile-esp</em>, <em>compile-less</em>, 
                    <em>compile-markdown</em>, <em>compile-sass</em>, <em>compress</em>, <em>minify-css</em>, 
                    <em>minify-js</em>, <em>prefix-css</em>, and <em>shell</em>.</td></tr>
                <tr><td>watch</td><td>Time in milliseconds to wait between checking for rendering.</td></tr>
            </tbody>
        </table>
        
        <h2>Control Properties</h2>
        <p>These are the standard properties in the <em>control</em> collection in <em>expansive.json</em>.</p>
        <table class="ui celled table">
            <thead>
                <tr><th>Name</th><th>Description</th></tr>
            </thead>
            <tbody>
                <tr><td>copy</td><td>Array of patterns to copy without processing. The patterns may include 
                    <em>*</em> or <em>**</em>. If a directory is specifed, all files under the directories copied. 
                    The files are relative to the <em>contents</em> directory.</td></tr>
                <tr><td>documents</td><td>Array of patterns to process. The patterns may include 
                    <em>*</em> or <em>**</em>. If a directory is specifed, all files under the directories 
                    are copied. The files are relative to the top-level directory.</td></tr>
                <tr><td>files</td><td>Array of directories containing raw content to copy to <em>dist</em> 
                    without processing. By default, contains <em>files</em>.</td></tr>
                <tr><td>listen</td><td>Address on which to listen for HTTP requests. May be just a port number.</td></tr>
                <tr><td>script</td><td>Script to evaluate to inject code into the Javascript global execution
                    context. This is visible to scripting in all pages.</td></tr>
                <tr><td>transforms</td><td>Hash of extension mappings to a list of transform services for those 
                    mappings. Mappings are in the form <em>ext -> ext</em>. For example:
                    <code>transforms: {
    'less -> css': [ 'compile-less', 'prefix-css', 'minify-css', 'compress' ]
}</code>

                    Some of the standard service names are: <em>compile-esp</em>, <em>compile-less</em>, 
                    <em>compile-markdown</em>, <em>compile-sass</em>, <em>compress</em>, <em>minify-css</em>, 
                    <em>minify-js</em>, <em>prefix-css</em>, and <em>shell</em>.</td></tr>
                <tr><td>watch</td><td>Time in milliseconds to wait between checking for rendering.</td></tr>
            </tbody>
        </table>
        <h2>Sample expansive.json</h2>
        <p>Here is a sample expansive.json configuration file for an 
            <a href="http://angularjs.org/">Angular application.</p>
        <code class="inverted">{
    meta: {
        url: 'https://embedthis.com/appweb/demo/',
        sitemap: {
            files: [
                '**.html',
                '!missing.html',
                '!unsupported.html'
            ]
        }
    },
    services: {
        'clean-css': true
    },
    debug: {
        services: {
            compress: false,
            'render-js': {
                usemap: false,
            },
            'ng-compile-html': false,
            'ng-package': false
        }
    },
    release: {
        services: {
            compress: false,
            'minify-css': {
                minify: true
            },
            'render-js': {
                usemap: false
            },
            'ng-compile-js': {
                files: [
                    'contents/**.js',
                    'lib/esp*/**.js',
                    'lib/angular*/**.js'
                ]
            },
            'ng-package': true
        }
    }
}
</code>

    </div>
    <div class="terms ui basic center aligned segment">
        <p>&copy; Embedthis Software, 2003-2014. All rights reserved.</p>
    </div>

    <script src="../jquery/jquery.min.js"></script>
    <script src="../semantic-ui/semantic.js"></script>
    <script>
        var sl = $('.sidebar-launch');
        $('.sidebar-launch').click(function() {
            var body = $('body');
            if (!body.hasClass('show-sidebar')) {
                body.addClass('show-sidebar');
                $('.sidebar').css('visibility', 'visible');
            } else {
                body.removeClass('show-sidebar');
                $('.sidebar').css('visibility', 'hidden');
            }
        });
        $('.sidebar-launch').trigger('click');
        $('.sidebar a.item').click(function(e) {
            sessionStorage.setItem('scroll-top', $('.sidebar').scrollTop());
        });
        $(function() {
            var url = '../users/configuration.html';
            var active = $('.sidebar a[href="' + url +'"]');
            active.addClass('active');
            $('.sidebar').scrollTop(sessionStorage.getItem('scroll-top'));
        });
    </script> 

</body>
</html>
