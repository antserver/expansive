<!DOCTYPE html>
<html lang="en">
<head>
    <title>Expansive Tour</title>
    <!-- Copyright Embedthis Software. All Rights Reserved. -->
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
    <meta name="keywords" content="undefined" />
    <meta name="description" content="Expansive Tour" />
    <link href='https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,700|Open+Sans:300italic,400,300,700'
        rel='stylesheet' type='text/css'>
    <link href='https://fonts.googleapis.com/css?family=Julius+Sans+One' rel='stylesheet' type='text/css'>
    <link href="../images/favicon.ico" rel="shortcut icon" />
    <link href="../semantic-ui/semantic.min.css" rel="stylesheet" type="text/css" />
    <link href="../css/all.css" rel="stylesheet" type="text/css" />
    

</head>
<body>
         <div class="sidebar">
        <div class="ui large left vertical inverted labeled menu">
            <div class="item">
                <a href="../index.html" class="logo">Expansive Docs</a>
            </div>
            <div class="item">
                <div class="menu">
                    <a class="header item" href="../index.html">Home</a>
                    <a class="item" href="../users/features.html">Expansive Features</a>
                    <a class="item" href="https://embedthis.com/expansive/download.html">Download</a>
                    <a class="item" href="../licensing/index.html">Licensing</a>
                </div>
            </div>
            <div class="item">
                <div class="menu">
                    <a class="header item" href="../start/index.html">Getting Started</a>
                    <a class="item" href="../start/quick.html">Quick Start</a>
                    <a class="item" href="../start/installing.html">Installing Expansive</a>
                    <a class="item" href="../start/releaseNotes.html">Release Notes</a>
                    <a class="item" href="../start/source.html">Building from Source</a>
                </div>
            </div>


            <div class="item">
                <a href="../users/index.html"><b>User's Guide</b></a>
                <div class="menu">
                    <a class="item" href="../users/tour.html">Tour</a>
                    <a class="item" href="../users/commands.html">Commands</a>
                    <a class="item" href="../users/skeletons.html">Skeletons</a>
                    <a class="item" href="../users/layouts.html">Layouts</a>
                    <a class="item" href="../users/partials.html">Partials</a>
                    <a class="item" href="../users/render.html">Rendering</a>

                    <a class="item" href="../users/stylesheets.html">Stylesheets</a>
                    <a class="item" href="../users/assets.html">Assets</a>
                    <a class="item" href="../users/serving.html">Serving Content</a>
                    <a class="item" href="../users/meta.html">Meta Data</a>
                    <a class="item" href="../users/collections.html">Collections</a>
                    <a class="item" href="../users/configuration.html">Configuration</a>
                    <a class="item" href="../users/scripting.html">Scripting</a>
                    <!-- query engine -->
                    <a class="item" href="../users/sitemaps.html">Sitemaps</a>
                    <a class="item" href="../users/troubleshoot.html">Trouble shooting</a>
                </div>
            </div>
            <div class="item">
                <a href="../ref/index.html">Reference Guide</a>
                <div class="menu">
                    <a class="item" href="../ref/plugins.html">Plugins</a>
                    <a class="item" href="../ref/files.html">Files and Directories</a>
                    <a class="item" href="../ref/meta.html">Meta Data</a>
                    <a class="item" href="../ref/control.html">Configuration Control</a>
                    <a class="item" href="../ref/scripting.html">Scripting</a>
                    <a class="item" href="../ref/events.html">Events</a>
                    <a class="item" href="../ref/pipeline.html">Processing Pipeline</a>
                </div>
            </div>
            <div class="item">
                <a href="../developers/project.html">Project Resources</a>
                <div class="menu">
                    <!-- MOB -->
                    <a class="item" href="http://goo.gl/ynBrjA">Official Expansive News</a>
                    <a class="item" href="https://embedthis.com/expansive/">Expansive Web Site</a>
                    <a class="item" href="https://github.com/embedthis/exp">Source Code Repository</a>
                    <a class="item" href="https://github.com/embedthis/exp/issues">Project Issue Database</a>
                    <a class="item" href="https://github.com/embedthis/exp/releases">Change Log</a>
                    <a class="item" href="https://github.com/embedthis/exp/milestones">Roadmap</a>
                    <a class="item" href="https://embedthis.com/developers/contributors.html">Contributors Agreement</a>
                </div>
            </div>
            <div class="item">
                <b>Links</b>
                <div class="menu">
                    <a class="item" href="https://embedthis.com/">Embedthis Web Site</a>
                    <a class="item" href="https://embedthis.com/blog/">Embedthis Blog</a>
                    <a class="item" href="http://twitter.com/mobstream">Twitter</a>
                </div>
            </div>
        </div>
    </div>

    <div class="ui sidebar-launch button">
        <i class="icon list layout"></i>
    </div>
    


    <div class="ui inverted masthead">
         
        <div class="ui inverted menu">
            <div class="right menu">
                  
                    <a class="item" href="https://embedthis.com/">Embedthis</a>
                    <a class="item" href="https://embedthis.com/expansive/">Expansive Site</a>
                    <a class="item" href="http://goo.gl/dGRDl4">Expansive News</a>
                    <a class="item" href="https://github.com/embedthis/expansive">Repository</a>
                    <a class="item" href="https://embedthis.com/blog/">Blog</a>
                    <a class="item" href="https://twitter.com/mobstream">Twitter</a>

            </div>
        </div>
        
        <div class="ui breadcrumb">
            <a class="section" href="../">Home</a>
            
            
            <div class="divider">/</div>
            <a class="active section" href="tour.html">Expansive Tour</a>
            
        </div>
        
        <div class="ui right floated basic segment version">
            v0.4.3
        </div>

    </div>
    <div class="content">

   
        <h1>A Quick Tour of Expansive</h1>
        <p>This is a quick beginners tour of Expansive. It will show you how to get started using
        Expansive for easily creating web sites. Before you start, make sure you have read the
        <a href="../start/quick.html">Quick Start</a> and that you have ESP 
        <a href="https://embedthis.com/esp/download.html">downloaded</a> and installed on your system.</p>

        <h2>Creating a New Web Site</h2>
        <p>We first need to create a directory for the web site. We'll call this "blog"</p>
        <pre class="ui code segment">$ mkdir blog
$ cd blog
$ expansive init
[Create] expansive.json
</pre>
		<p>This will create the required standard Expansive files and directories including:
		<ul>
			<li><b>contents</b> &mdash; Source content for the web site including web pages, images and assets.</li>
			<li><b>dist</b> &mdash; Distribution directory where the final public documents of the web 
                site will be placed.</li>
			<li><b>expansive.json</b> &mdash; Expansive configuration file</li>
			<li><b>layouts</b> &mdash; Directory for master page layouts</li>
			<li><b>lib</b> &mdash; Library and scripts code</li>
			<li><b>package.json</b> &mdash; Web site package description file</li>
			<li><b>paks</b> &mdash; Installed packages - imported into lib</li>
			<li><b>partials</b> &mdash; Directory for partial pages</li>
		</ul>

		<h2>First Page</h2>
		<p>To create a web page, use your favorite editor and create a page named "index.html"
		under the <b>contents</b> directory.</p>
		<pre class="ui code segment">
&lt;html>
&lt;head>
    &lt;title>First Page&lt;/title>
&lt;/head>
&lt;body>
    &lt;h1>Hello World&lt;/h1>
&lt;/body>
&lt;/html>
</pre>
		<h2>Running Expansive</h2>
		<p>Now you can run expansive to create the new site.</p>
		<pre class="ui code segment">$ <b>expansive render</b>
   [Created] dist/index.html</pre>

   		<p>This process all the files under <b>contents</b> and creates a complete, rendered web site under <b>dist</b>.
   		You can also render and then serve the content while dynamically watching for any changes to the input sources by
   		invoking expansive without any other arguments.</p>
		<pre class="ui code segment">$ <b>expansive</b>
    [Listen] 127.0.0.1:4000
    [Render] Initial render ...
   [Created] dist/index.html
  [Watching] for changes every 1 sec ...
</pre>

   		<p>Expansive will first render the files under <b>contents</b> and create the web site under 
   		the <b>dist</b> directory. It will then listen on port 4000 for browser requests. So open your browser and
   		go to <b>http://localhost:4000</b> to see your new page.</p>

   		<h2>Creating Layouts</h2>
   		<p>Most pages share a similar layout with other pages and replicating that layout from page to page is 
   		slow and difficult to keep each page in sync. Expansive provides layout pages that define the common elements
   		of pages so that content pages can focus on the unique aspects of the page.</p>

   		<p>Layout pages provide the outer contents. Expansive automatically blends the layout page with the content page to
   		create a final composite page. Let's extract the layout from the first page and create a master layout page in
   		<b>layouts/default.html.exp</b>.
   		<pre class="ui code segment">
&lt;html>
&lt;head>
    &lt;title><b>&lt;&#64;= meta.title @&gt;</b>&lt;/title>
    &lt;@ renderStyles() @&gt;
&lt;/head>
&lt;body>
    <b>&lt;@ content @&gt;</b>
    &lt;@ renderScripts() @&gt;
&lt;/body>
&lt;/html>
</pre>
		<p>The <b>.exp</b> extension indicates that this page contains embedded Expansive script that must be processed.
		More on this a little later on. The renderScripts() and renderStyles() calls will generate the required 
		script HTML elements and stylesheet references.</p>

		<p>Now we can change the <b>contents/index.html</b> home page to remove the layout HTML and focus just on the
		unique content for this page:</p>
		<pre class="ui code segment">
{
    title: 'Hello World'
}    

&lt;h1>Hello World with Layouts&lt;/h1>
</pre>
		<p>If you kept Expansive running from before, it will detect the new layout and automatically render the new
		<b>dist/index.html</b>. Reload your browser to see the new content.</p>

		<p>The special area between the braces at the top of the content page is called Meta data. It provides meta data
		values that can be accessed in layout pages using the special <b>&#64;=</b> Expansive sequence. This is how you can
		control and customize layout pages from within content pages.</p>

		<h2>Extensions</h2>
		<p>Expansive can be extended by plugin extensions to provide content, functionality and quick-start skeletons.
		Expansive leverages the <a href="https://embedthis/pak/">Pak</a> package manager and the 
		online <a href="https://embedthis.com/catalog/">Pak Catalog</a> of extensions and plugins.
		Pak is used to install, manage, upgrade and uninstall extensions and plugins. Expansive has a wide variety of
		pre-integrated extensions to make your development go faster.</p>
		<p>For example, to install <a href="http://jquery.com">jQuery</a> using Pak:</p>
		<pre class="ui code segment">$ <b>pak install jquery</b>
[Install] jquery 1.11.1</pre>
		<p>Behinds the scenes, Pak has downloaded jquery into your local Pak cache (typically ~/.paks), 
		installed jQuery into the <b>paks</b>
		directory, and added jQuery to the list of dependencies in the package.json. When Expansive next renders the 
		site, it will notice that jQuery asks for the "jquery.js" file to be added to the Expansive <b>scripts</b> 
		collection via its package.json file. Expansive automatically generates a reference for "jquery.js" 
		via the <b>renderScripts()</b> statement in the layout file. In this way, many Expansive extension paks,
		can just be installed and they self-configure into your application.</p>
		<p>This is what the <b>dist/index.html</b> home page now looks like:</p>
   		<pre class="ui code segment">
&lt;html>
&lt;head>
    &lt;title>Blog&lt;/title>
&lt;/head>
&lt;body>
    &lt;h1>Hello World with Layouts&lt;/h1>
    <b>&lt;script src="lib/jquery/jquery.js">&lt;/script></b>
&lt;/body>
&lt;/html>
</pre>
		<p>See the <a href="https://embedthis.com/catalog/#/?kekywords=exp">Pak Catalog</a> for more Expansive 
			extensions, including: 
			<a href="https://embedthis.com/catalog/#/?keywords=bootstrap">Bootstrap</a>,
			<a href="https://embedthis.com/catalog/#/?keywords=angular">Angular</a>,
			<a href="https://embedthis.com/catalog/#/?keywords=font-awesome">Font Awesome</a>,
			<a href="https://embedthis.com/catalog/#/?keywords=semantic">Semantic UI</a>, and
			<a href="https://embedthis.com/catalog/#/?keywords=sass">Sass</a>.</p>

		<h3>Plugins</h3>
		<p>Plugins are a special class of extension that provides core processing for the Expansive pipeline. Plugins
		provide <b>services</b> that are used to transform a file from one extension to another. For example: the
		<b>exp-md</b> plugin provides the <b>compile-markdown-html</b> service that transforms <b>.md</b> files into
		standard <b>.html</b> files.</p>

		<h2>Skeletons</h2>
		<p>Expansive skeletons are integrated collections of Paks that are excellent starting points for web sites.
			Skeletons include all required dependencies and provide an easy, one-step creation of your web site.</p>
			<p>For example, to create a web site that will use <a href="http://sementic-ui.com">Semantic-UI</a>, a 
			modern alternative to <a href="http://getbootstrap.com">Bootstrap</a>:</p>
		<pre class="ui code segment">$ <b>pak install exp-semantic-skeleton</b>
[Install] jquery 1.11.1
[Install] semantic 0.50.0
[Install] exp-semantic-skeleton 0.1.0
</pre>
			<p>This installs Semanic-UI, jQuery, the semantic skeleton, and a set of Expansive plugins to process
				Less and CSS stylesheets and scripts, as show by the <b>pak list</b>
				command.</p>
<pre class="ui code segment">
$ <b>pak list</b>
exp-semantic-skeleton 0.1.0 installed
jquery 1.11.1 installed
semantic 0.50.0 installed
exp-js 0.2.0 cached
exp-less 0.2.0 cached
exp-css 0.2.0 cached
</pre>
			<p>The exp-js extension processes script files to minify and compress. The exp-less extension processes
			Less stylesheets to compile into CSS files. The exp-css extension manages browser css prefixes and 
			minifies CSS stylesheets. These extensions are automatically invoked for the appropriate file extensions.
			Although, you can modify this behavior via the expansive.json configuration file.</p>


		<h2>Processing Pipeline</h2>
		<p>So far, we have processed simply HTML pages, but Expansive can render other file types such as 
			<a href="http://daringfireball.net/projects/markdown/syntax">Markdown</a> or 
			<a href="https://embedthis.com/esp/">ESP</a>. To process Markdown files, first install the 
			<a href="https://embedthis.com/catalog/#/?keywords=exp-md">Markdown</a> extension.
			<pre class="ui code segment">$ pak install exp-md
[Cached] exp-md 0.2.0</pre>
			<p>This installs the Markdown extension into the Pak cache (~/.paks). Expansive can utilize some 
			extensions directly from the Pak cache so that your local web directory does not get cluttered with 
			unwanted programs.</p>

			<p>Now create a sample markdown page, create a document called
			<b>contents/greeting.html.md</b> with the following content:</p>
		 <pre class="ui code segment">
# Greetings
Expansive **expands** your mind.
</pre>
		<p>Expansive will render this and create <b>dist/greeting.html</b> which will look like:</p>
   		<pre class="ui code segment">
&lt;html>
&lt;head>
    &lt;title>Blog&lt;/title>
&lt;/head>
&lt;body>
    <b>&lt;h1 id="greetings">Greetings&lt;/h1>
    &lt;p>Expansive <strong>expands</strong> your mind.&lt;/p></b>
    &lt;script src="lib/jquery/jquery.js">&lt;/script>
&lt;/body>
&lt;/html>
</pre>
		<p>Expansive renders the web site by processing all files in the <b>contents</b> directory. It interprets 
			all the extensions for each file, one by one. For example: if a file were named <b>page.html.md</b> it would
			invoke the markdown processor for the <b>.md</b> extension, then it would invokek the <b>.html</b> processor
			before saving the final result under the <b>dist</b> directory. A file can have any number of 
			extensions and they will be processed from the outside-inwards.</p>

		<h2>Scripting</h2>
		<p>Expansive supports powerful scripting for files with a <b>.exp</b> extension. Expansive uses the 
			<a href="https://embedthis.com/ejscript/">Ejscript</a> Javascript language for embedded scripts that are
			processed at "render-time". This means that static web pages can use dynamic scripting without a run-time
			penalty when the site is live.</p>
		<p>If a source page, layout or partial has a <b>.exp</b> extension, it will be processed by the Expansive Ejscript
		service. Javascript code is defined between the <b>&lt;&#64; code &#64;></b> tags. For example:</p> 
		<pre class="ui code segment">
&lt;p>Today's date is &lt;&#64;= Date() @&gt;
</pre>
			<p>The <b>&lt;&#64;=</b> sequence means run the Javascript expression and paste the result here.
			The <b>&lt;&#64;</b> sequence (without the equals) means run the Javascript code and do not paste any result.
			This is useful to iterate over html elements. For example:</p>
		<pre class="ui code segment">
&lt;ul>
&lt;@ for (i = 0; i < 10; i++) { @&gt;
	&lt;li> Item &lt;&#64;= i @&gt; &lt;/li>
&lt;@ } @&gt;
&lt;/ul>
</pre>
			<p>This will emit ten item lines</p>
			<p>The <b>&lt;&#64;=</b> sequence means run the Javascript expression and paste the result here.
			<pre class="ui code segment">
&lt;ul>
    &lt;li> Item 0 &lt;/li>
    &lt;li> Item 1 &lt;/li>
    &lt;li> Item 2 &lt;/li>
    &lt;li> Item 3 &lt;/li>
    &lt;li> Item 4 &lt;/li>
    &lt;li> Item 5 &lt;/li>
    &lt;li> Item 6 &lt;/li>
    &lt;li> Item 7 &lt;/li>
    &lt;li> Item 8 &lt;/li>
    &lt;li> Item 9 &lt;/li>
&lt;/ul>
</pre>
			<h3>Short Forms</h3>
			<p>Because variable substitution is so common, Expansive provides some convenient short forms:</p>
			<ul>
				<li>&#64;=expression &mdash; to substitute the expression value (no spaces in expression)</li>
				<li>&#64;={expression} &mdash; to substitute the expression value</li>
				<li>&#64;~ &mdash; to replace with the relative URL to the application home (top)</li>
				<li>&#64;&#64; &mdash; to get a single literal '@' in the rendered document.</li>
			</ul>

		<h2>Configuration</h2>
		<p>Expansive is configured by an <b>expansive.json</b> configuration file that controls the initial meta
		data, directory names, file patterns to process, ports to serve and processing instructions. Expansive uses
		sensible defaults so you typically do not need to configure much. Here is a typical expansive.json file:</p>

		<pre class="ui code segment">
{
  meta: {
    url: 'https://embedthis.com/',
  },
  control: {
    copy: [ 'images' ],
  },
  services: {
    'compress':  false,
    'minify-js':  false,
    'minify-css': false
 }
}
		</pre>
		<p>The Meta property section defines the default public URL for the site. The <b>copy</b> property provides a 
		hint to Expansive that anything under the 'images' directory should be copied and not processed by the Expansive 
		pipeline. The <b>services</b> property set provides configuration for the plugin services to control their operation 
		and enable/disable minification and compression services.</p> 

		<p>If you require a scripted configuration, you can alternatively use an <b>expansive.es</b> script file instead of
		the expansive.json. For more details, see the reference configuration section.</p>

		<h2>Queries and Collections</h2>
		<p>Expansive provides a Collections facility for managing lists of items. It uses collections to manage a list of
		requried stylesheets and scripts. However you can create your own collections. To create a collection via the 
		configuration file:</p>
		<pre class="ui code segment">
{
  control: {
    collections: {
      styles: [
        'css/all.css',
      ],
      downloads: [
        'public/*.gz',
      ]
    }
  }
}
</pre>
		<p>This adds the <b>css/all.css</b> stylesheet to the existing 'styles' collection. The <b>downloads</b> 
		collection does not exist, so it is created.</p>

		<p>You can also use the APIs: addItems(collection, items), getItems(collection) and removeItems(collection, items)
		in Expansive script code to access collection data.</p>

		<h3>Queries</h3>
		<p>Expansive provides a powerful query like API to work with files to be rendered in the <b>contents</b> directory.
			The <b>getFiles</b> API can query the meta data of source files 
		<pre class="ui code segment">&lt;@ var list = getFiles({ isPublic: true }) &#64;></pre>
		<p>This will return a list of filenames for documents that have meta data <b>isPublic</b> set to true.</p>


		<h2>Release Modes</h2>
		<p>Expansive can render web sites according to a configured <b>mode</b>. This mode may be set to debug, test, 
			release, or any string value you like. The mode is stored in the <b>mode</b> property in the package.json file and
			is accessed by Expansive when rendering the site. For example:
<pre class="ui code segment">
{
  "debug": {
    "services": {
      "compress": false,
      "minify-css": false,
      "minify-js": false,
    }
  },
  "release": {
    "services": {
      "minify-css": true
    }
  }
}
</pre>
		<p>This defines two modes: debug and release. In debug mode, minification of CSS and script files is disabled and
			compression via the <b>exp-gzip</b> extension is disabled. In release mode, minfication is enabled for scripts
			by default and is explicitly enabled for CSS files.</p>
		<p>The mode may be conveniently set via:
		<pre class="ui code segment">pak mode debug
  or
pak mode release</pre>

		<h2>Deployment</h2>
		<p>When deploying Expansive web sites, you should configure the appropriate <b>mode</b> and run <b>expansive render</b>.
		All the files you need for your site will be under the <b>dist</b> directory.</p>




    </div>
    <div class="terms ui basic center aligned segment">
        <p>&copy; Embedthis Software, 2003-2014. All rights reserved.</p>
    </div>

    <script src="../jquery/jquery.js"></script>
    <script src="../semantic-ui/semantic.js"></script>
    <script>
        var sl = $('.sidebar-launch');
        $('.sidebar-launch').click(function() {
            var body = $('body');
            if (!body.hasClass('show-sidebar')) {
                body.addClass('show-sidebar');
                $('.sidebar').css('visibility', 'visible');
            } else {
                body.removeClass('show-sidebar');
                $('.sidebar').css('visibility', 'hidden');
            }
        });
        $('.sidebar-launch').trigger('click');
        $('.sidebar a.item').click(function(e) {
            sessionStorage.setItem('scroll-top', $('.sidebar').scrollTop());
        });
        $(function() {
            var url = '../users/tour.html';
            var active = $('.sidebar a[href="' + url +'"]');
            active.addClass('active');
            $('.sidebar').scrollTop(sessionStorage.getItem('scroll-top'));
        });
    </script> 

</body>
</html>
